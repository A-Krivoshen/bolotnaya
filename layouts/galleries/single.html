{{ define "main" }}
{{ partial "glightbox.html" . }}
<main class="container" style="max-width:1100px;margin:0 auto;padding:24px;">
  <h1>{{ .Title }}</h1>
  {{ with .Params.description }}<p class="lead" style="opacity:.8;margin-bottom:24px;">{{ . }}</p>{{ end }}

  {{/* Берём свои images или падаем обратно на перевод */}}
  {{ $page := . }}
  {{ $images := $page.Params.images }}
  {{ if not $images }}
    {{ range $page.Translations }}
      {{ if .Params.images }}
        {{ $images = .Params.images }}
      {{ end }}
    {{ end }}
  {{ end }}

  <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;">
    {{ range $images }}
      {{ $src := .src }}
      {{ if not (hasPrefix $src "/") }}{{ $src = print "/images/galleries/" $src }}{{ end }}
      <figure style="margin:0">
        <img src="{{ $src }}" alt="{{ .caption }}" loading="lazy" style="width:100%;height:auto;border-radius:10px;">
        {{ with .caption }}<figcaption style="font-size:.9rem;opacity:.8;margin-top:6px;">{{ . }}</figcaption>{{ end }}
      </figure>
    {{ else }}
      <p>В альбоме пока нет фотографий.</p>
    {{ end }}
  </div>
</main>
{{ end }}
