{{ define "main" }}
  <main class="container">
    <h1>{{ if eq $.Site.Language.Lang "ru" }}Камеры{{ else }}Cameras{{ end }}</h1>
    {{ $pages := where .Pages "Lang" $.Site.Language.Lang }}
    <div class="posts-grid" style="grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));">
      {{ range $pages.ByTitle }}
        <a class="post-preview" href="{{ .RelPermalink }}">
          {{/* Safe image fallback */}}
          {{ $ph := "/images/placeholders/camera.svg" }}
          {{ $img := .Params.image }}
          {{ if $img }}
            {{ $trim := (strings.TrimPrefix "/" $img) }}
            {{ $staticPath := (printf "static/%s" $trim) }}
            {{ if fileExists $staticPath }}{{ else }}{{ $img = $ph }}{{ end }}
          {{ else }}
            {{ $img = $ph }}
          {{ end }}
          <img src="{{ $img | relURL }}" alt="{{ .Title }}" style="width:100%; height:160px; object-fit:cover; border-radius:6px;">
          <h3 style="margin-top:.75rem;">{{ .Title }}</h3>
          {{ with .Params.description }}<p>{{ . }}</p>{{ end }}
        </a>
      {{ end }}
    </div>
  </main>
{{ end }}
