{{/* Simple single-camera embed (used on /cameras/ list page) */}}

<div class="camera-shell">
  <div class="camera-card video-container">
    {{ if and .Params.id .Params.hls_url }}
      <video id="video-{{ .Params.id }}" class="camera-video" controls autoplay muted playsinline>
        <source src="{{ .Params.hls_url }}" type="application/x-mpegURL">
      </video>

      <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
      <script>
        (function(){
          var video = document.getElementById('video-{{ .Params.id }}');
          var hlsUrl = '{{ .Params.hls_url }}';
          if (!video || !hlsUrl) return;

          if (window.Hls && Hls.isSupported()) {
            var hls = new Hls();
            hls.loadSource(hlsUrl);
            hls.attachMedia(video);
            hls.on(Hls.Events.ERROR, function(event, data) {
              console.log('HLS Error:', data);
            });
          } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = hlsUrl;
          }
        })();
      </script>
    {{ else }}
      <p>Ошибка: Проверь параметры ID и HLS URL.</p>
    {{ end }}
  </div>

  {{ partial "support-partner.html" . }}
</div>
